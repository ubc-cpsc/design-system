{#
/**
 * @file
 * Theme override to display a node.
 */
#}
{%
  set classes = [
    'node',
    'node--type-' ~ node.bundle|clean_class,
    view_mode != 'full' and node.isPromoted() ? 'node--promoted',
    view_mode != 'full' and node.isSticky() ? 'node--sticky',
    not node.isPublished() ? 'node--unpublished',
    view_mode ? 'node--view-mode-' ~ view_mode|clean_class,
  ]
%}
<article{{ attributes.addClass(classes) }}>
  {% block header %}
    <header>
      {{ title_prefix }}
      {% if page %}
        <h1{{ title_attributes.addClass('page-title') }}>
          {{ label|render|striptags|replace({'_': ' '}) }}
        </h1>
      {% endif %}
      {{ title_suffix }}
    </header>
  {% endblock %}

  {% block node_meta %}
  {% if display_submitted and page %}
    <footer class="node__meta">
      {# {{ author_picture }} #}
      <div{{ author_attributes.addClass('node__submitted') }}>
        {{ node.getCreatedTime()|format_date('custom', 'F j, Y') }}
        {% trans %}by {{ author_name }}{% endtrans %}
        {{ metadata }}
      </div>
    </footer>
  {% endif %}
  {% endblock %}

  {% block pre_content_custom_views %}{% endblock %}

  {% block node_content %}
  <div{{ content_attributes.addClass('node__content') }}>
      {% if show_course_schedule %}
      {# Add autogenerated course section link #}
      {% set dept_course = node.field_course_pid.value|split('_') %}
      {% set dept = dept_course.0 %}
      {% set course = dept_course.1 %}
      {% set section = node.field_course_section.value %}
      {% set session = node.field_course_year.value[-1:1] %}
      {% set year = node.field_course_year.value[:-1] %}
      <div class="field"><a class="button button--outline course-section-ssc-link" href="https://courses.students.ubc.ca/cs/courseschedule?sessyr={{ year }}&sesscd={{ session }}&pname=subjarea&tname=subj-section&dept={{ dept }}&course={{ course }}&section={{ section }}">View On SSC</a></div>
    {% endif %}
    {{ content|without('links', 'field_header_image') }}
  </div>
  {% endblock %}

  {% block post_content_custom_views %}{% endblock %}

  {% block node_links %}
  {% if content.links %}
    <div class="node__links">
      {{ content.links }}
    </div>
  {% endif %}
  {% endblock %}

</article>
